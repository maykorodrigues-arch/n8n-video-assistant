<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Criação: YouTube & N8N</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
        }

        /* --- Estilos das Abas --- */
        .tab-button {
            padding: 0.75rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            background-color: #e5e7eb;
            color: #4b5563;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        .tab-button.active {
            color: #1e40af; /* Azul forte */
            border-bottom-color: #1e40af;
            background-color: #fff;
        }
        .tab-content {
            display: none;
            background-color: #fff;
            padding: 2rem;
            border-radius: 0 0 0.75rem 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .tab-content.visible {
            display: block;
        }

        /* --- Estilos do Gerador YouTube --- */
        .step-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin-bottom: 2rem;
            border: 1px solid #e5e7eb;
        }
        .step-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            background-color: #fafafa;
        }
        .agent-card {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-top: 1.5rem;
        }
        .agent-header {
            background-color: #f9fafb;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .agent-body {
            padding: 1rem;
        }
        .result-container {
            background-color: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            white-space: pre-line;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #0c4a6e;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6; /* Azul do Gerador */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        /* --- Estilos do Infográfico N8N --- */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
         @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
         }
        .flow-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid #E5E7EB;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .flow-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #BFD7EA;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }
        .flow-loop {
            border: 3px dashed #FF5A5F;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .prompt-card {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .prompt-card.selected {
            border-color: #087E8B;
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        /* Loader específico do Infográfico (cor diferente) */
        .info-loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #087E8B; /* Verde-azulado do Infográfico */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        /* Animação de Spin (usada por ambos) */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        textarea {
            resize: vertical;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-black text-gray-900">Dashboard de Criação</h1>
            <p class="text-lg text-gray-600 mt-2">Suas ferramentas de IA para YouTube e N8N em um só lugar.</p>
        </header>

        <nav class="flex mb-0 -mb-px">
            <button id="tab-gerador" class="tab-button active">Gerador YouTube</button>
            <button id="tab-infografico" class="tab-button">Fábrica N8N (Infográfico)</button>
        </nav>

        <div id="content-gerador" class="tab-content visible">
            
            <header class="text-center mb-6">
                <h1 class="text-3xl font-black text-gray-900">Gerador YouTube: da Ideia ao Clique</h1>
                <p class="text-md text-gray-600 mt-1">Sua suíte de agentes de IA para criar vídeos de sucesso.</p>
            </header>
            
            <div class="bg-gray-50 p-6 rounded-lg shadow-inner mb-8 border border-blue-200">
                <label for="gerador-api-key" class="block text-lg font-bold text-gray-800 mb-2">Chave da API Gemini (Obrigatória)</label>
                <input type="password" id="gerador-api-key" class="block w-full px-4 py-3 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Cole sua chave de API do Google AI Studio aqui...">
                <p class="text-xs text-gray-500 mt-2">Sua chave é usada para todos os agentes desta aba.</p>
            </div>
    
            <div id="step-1" class="step-card">
                <div class="step-header">
                    <h2 class="text-2xl font-bold text-gray-900">Etapa 1: Estratégia</h2>
                    <p class="text-sm text-gray-500">Defina o conceito e encontre ângulos que atraem o público certo.</p>
                </div>
                <div class="p-6">
                    <p class="text-gray-700 mb-4">Use os agentes abaixo para encontrar temas com alto potencial e criar uma abordagem única.</p>
                    
                    <div class="agent-card">
                        <div class="agent-header">
                            <h3 class="font-bold text-blue-800">Agente: Gerador de Ideias Virais</h3>
                        </div>
                        <div class="agent-body">
                            <label for="topic-input" class="block text-sm font-medium text-gray-700 mb-1">Insira um tema ou palavra-chave:</label>
                            <input type="text" id="topic-input" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Ex: Produtividade, Receitas veganas, Finanças para iniciantes">
                            <button id="generate-ideas-btn" class="mt-3 bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400">Gerar Ideias de Conteúdo</button>
                            <div id="ideas-loader" class="hidden mt-3 loader"></div>
                            <div id="ideas-result" class="hidden result-container"></div>
                        </div>
                    </div>
    
                    <div class="agent-card">
                        <div class="agent-header">
                            <h3 class="font-bold text-blue-800">Agente: Criador de Ângulos Únicos</h3>
                        </div>
                        <div class="agent-body">
                            <label for="angle-input" class="block text-sm font-medium text-gray-700 mb-1">Cole uma ideia de vídeo para detalhar:</label>
                            <textarea id="angle-input" rows="3" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Ex: 5 hábitos que destruíram minha produtividade (e como resolvi)"></textarea>
                            <button id="generate-angles-btn" class="mt-3 bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400">Criar Ângulos para o Roteiro</button>
                            <div id="angles-loader" class="hidden mt-3 loader"></div>
                            <div id="angles-result" class="hidden result-container"></div>
                        </div>
                    </div>
                </div>
            </div>
    
            <div id="step-2" class="step-card">
                <div class="step-header">
                    <h2 class="text-2xl font-bold text-gray-900">Etapa 2: Apresentação</h2>
                    <p class="text-sm text-gray-500">Crie o título e a thumbnail que fazem as pessoas pararem para clicar.</p>
                </div>
                 <div class="p-6">
                    <p class="text-gray-700 mb-4">A combinação de um título magnético com uma thumbnail chamativa é o que determina o clique.</p>
                    
                    <div class="agent-card">
                        <div class="agent-header">
                            <h3 class="font-bold text-green-800">Agente: Mestre dos Títulos</h3>
                        </div>
                        <div class="agent-body">
                            <label for="title-input" class="block text-sm font-medium text-gray-700 mb-1">Qual é o tema central do seu vídeo?</label>
                            <input type="text" id="title-input" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Ex: Como fazer o melhor bolo de chocolate">
                            <button id="generate-titles-btn" class="mt-3 bg-green-600 text-white font-bold py-2 px-4 rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400">Gerar Títulos para YouTube</button>
                            <div id="titles-loader" class="hidden mt-3 loader"></div>
                            <div id="titles-result" class="hidden result-container"></div>
                        </div>
                    </div>
    
                    <div class="agent-card">
                        <div class="agent-header">
                            <h3 class="font-bold text-green-800">Agente: Designer de Thumbnails</h3>
                        </div>
                        <div class="agent-body">
                            <label for="thumb-input" class="block text-sm font-medium text-gray-700 mb-1">Cole o título final do seu vídeo:</label>
                            <input type="text" id="thumb-input" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Ex: O SEGREDO do Bolo de Chocolate PERFEITO">
                            <button id="generate-thumbs-btn" class="mt-3 bg-green-600 text-white font-bold py-2 px-4 rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400">Descrever Ideias de Thumbnails</button>
                            <div id="thumbs-loader" class="hidden mt-3 loader"></div>
                            <div id="thumbs-result" class="hidden result-container"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="step-3" class="step-card">
                <div class="step-header">
                    <h2 class="text-2xl font-bold text-gray-900">Etapa 3: Publicação</h2>
                    <p class="text-sm text-gray-500">Crie a descrição que ajuda o YouTube a recomendar seu vídeo.</p>
                </div>
                 <div class="p-6">
                     <p class="text-gray-700 mb-4">A descrição é fundamental para o SEO do seu vídeo. Um bom texto ajuda o algoritmo a entender seu conteúdo.</p>
    
                    <div class="agent-card">
                        <div class="agent-header">
                            <h3 class="font-bold text-purple-800">Agente: Especialista em SEO</h3>
                        </div>
                        <div class="agent-body">
                            <label for="desc-title-input" class="block text-sm font-medium text-gray-700 mb-1">Título do vídeo:</label>
                            <input type="text" id="desc-title-input" class="w-full p-2 border border-gray-300 rounded-md mb-2" placeholder="Cole o título final aqui">
                            <label for="desc-topic-input" class="block text-sm font-medium text-gray-700 mb-1">Resumo do conteúdo do vídeo:</label>
                            <textarea id="desc-topic-input" rows="3" class="w-full p-2 border border-gray-300 rounded-md" placeholder="Descreva brevemente sobre o que é o vídeo"></textarea>
                            <button id="generate-desc-btn" class="mt-3 bg-purple-600 text-white font-bold py-2 px-4 rounded-md hover:bg-purple-700 transition-colors disabled:bg-gray-400">Gerar Descrição Otimizada</button>
                            <div id="desc-loader" class="hidden mt-3 loader"></div>
                            <div id="desc-result" class="hidden result-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="content-infografico" class="tab-content" style="background-color: #BFD7EA;">
            
            <header class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-black text-[#0B3954] uppercase">Sua Fábrica de Vídeos com IA</h1>
                <p class="text-lg md:text-xl text-[#087E8B] mt-2 max-w-3xl mx-auto">Um guia interativo para automatizar a criação de vídeos com N8N e publicá-los no TikTok.</p>
            </header>
    
            <section class="mb-16">
                <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-8">Componentes Principais</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white rounded-lg shadow-lg p-6 text-center transition-transform transform hover:scale-105">
                        <div class="text-6xl mb-4">🧠</div>
                        <h3 class="text-2xl font-bold text-[#0B3954]">N8N (O Cérebro)</h3>
                        <p class="text-gray-600 mt-2">A plataforma que orquestra todo o processo, conectando as ferramentas e executando as tarefas.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 text-center transition-transform transform hover:scale-105">
                        <div class="text-6xl mb-4">🎨</div>
                        <h3 class="text-2xl font-bold text-[#0B3954]">Fal.ai (A Magia)</h3>
                        <p class="text-gray-600 mt-2">O serviço de IA que recebe seu comando e cria um vídeo único baseado na sua instrução.</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-lg p-6 text-center transition-transform transform hover:scale-105">
                        <div class="text-6xl mb-4">🚀</div>
                        <h3 class="text-2xl font-bold text-[#0B3954]">TikTok (O Palco)</h3>
                        <p class="text-gray-600 mt-2">A plataforma final onde os vídeos são publicados automaticamente para o seu público.</p>
                    </div>
                </div>
            </section>
    
            <section class="mb-16">
                <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-8">O Fluxo de Trabalho Descomplicado</h2>
                <div class="max-w-4xl mx-auto">
                    <div class="flex flex-col items-center">
                        <div class="flow-card w-full md:w-3/4">
                            <span class="text-2xl font-bold text-[#FF5A5F]">ETAPA 1: O Gatilho 🎬</span>
                            <p class="text-gray-600 mt-1">Iniciamos a mágica! O workflow começa definindo o texto (prompt) que dará vida ao vídeo.</p>
                        </div>
                        <div class="flow-arrow">↓</div>
                        <div class="flow-card w-full md:w-3/4">
                            <span class="text-2xl font-bold text-[#FF5A5F]">ETAPA 2: Criando o Vídeo 🤖</span>
                             <p class="text-gray-600 mt-1">Enviamos a ideia para a IA da Fal.ai e recebemos um ID para acompanhar a criação.</p>
                        </div>
                         <div class="flow-arrow">↓</div>
                        <div class="w-full md:w-3/4 flow-loop">
                            <h3 class="text-xl font-semibold text-center text-[#C81D25] mb-4">ETAPA 3: Verificando o Forno ⏳</h3>
                            <p class="text-center text-gray-700 mb-4">O N8N pergunta repetidamente à IA: "Já está pronto?". Se sim, avança. Se não, espera e pergunta de novo.</p>
                        </div>
                        <div class="flow-arrow">↓</div>
                        <div class="flow-card w-full md:w-3/4">
                             <span class="text-2xl font-bold text-[#FF5A5F]">ETAPA 4: Toques Finais ✨</span>
                            <p class="text-gray-600 mt-1">Com o vídeo pronto, usamos a IA do Gemini para gerar um título criativo para a postagem.</p>
                        </div>
                        <div class="flow-arrow">↓</div>
                        <div class="flow-card w-full md:w-3/4 bg-green-50 border-green-200">
                            <span class="text-2xl font-bold text-green-600">ETAPA 5: Hora do Show 🚀</span>
                            <p class="text-gray-600 mt-1">O vídeo e o título são enviados automaticamente para a sua conta do TikTok.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="mb-16 bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-2">Gerador de Títulos (TikTok) com Gemini AI</h2>
                <p class="text-center text-gray-600 mb-6 max-w-2xl mx-auto">Insira sua API Key, selecione um prompt de exemplo e gere um título para seu vídeo em segundos.</p>
                
                <div class="max-w-xl mx-auto mb-6">
                    <label for="info-api-key" class="block text-sm font-medium text-gray-700 mb-1">Sua API Key do Google AI Studio</label>
                    <input type="password" id="info-api-key" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#087E8B] focus:border-[#087E8B] sm:text-sm" placeholder="Cole sua chave de API aqui...">
                </div>

                <h3 class="text-xl font-bold text-center text-[#0B3954] mb-4">1. Escolha um Prompt Pré-programado</h3>
                 <div id="info-prompt-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                    </div>

                <div class="text-center mb-6">
                    <button id="info-generate-btn" disabled class="bg-[#087E8B] text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-[#0B3954] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed">
                        2. Gerar Título para o Vídeo
                    </button>
                </div>

                <div id="info-result-container" class="max-w-xl mx-auto text-center">
                     <div id="info-loader" class="hidden mx-auto info-loader"></div>
                     <div id="info-gemini-result" class="text-lg text-[#0B3954] font-semibold bg-gray-100 p-4 rounded-lg" style="min-height: 50px;"></div>
                </div>
            </section>

            <section>
                 <h2 class="text-3xl font-bold text-center text-[#0B3954] mb-8">Análise de Impacto (Dados Ilustrativos)</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                     <div class="bg-white rounded-lg shadow-lg p-6">
                         <h3 class="text-xl font-bold text-center text-[#0B3954] mb-4">Estimativa de Custo por Vídeo</h3>
                         <p class="text-center text-gray-600 mb-4">A automação reduz custos operacionais. A maior parte do investimento vai para o poder computacional da IA.</p>
                         <div class="chart-container">
                             <canvas id="costChart"></canvas>
                         </div>
                     </div>
                     <div class="bg-white rounded-lg shadow-lg p-6">
                         <h3 class="text-xl font-bold text-center text-[#0B3954] mb-4">Otimização de Tempo por Postagem</h3>
                          <p class="text-center text-gray-600 mb-4">Compare o tempo gasto em um processo manual com a eficiência do workflow automatizado.</p>
                         <div class="chart-container h-[350px] md:h-[400px]">
                             <canvas id="timeChart"></canvas>
                         </div>
                     </div>
                 </div>
            </section>
        </div>
        
        <footer class="text-center mt-16">
            <p class="text-gray-600">Dashboard de Criação desenvolvido para o "Assistente de Implementação".</p>
        </footer>

    </div>

    <script>
        // --- SCRIPT GERAL (ABAS) ---
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.tab-button');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove 'active' de todas as abas
                    tabs.forEach(t => t.classList.remove('active'));
                    // Adiciona 'active' na aba clicada
                    tab.classList.add('active');

                    // Esconde todo o conteúdo
                    contents.forEach(c => c.classList.remove('visible'));
                    
                    // Mostra o conteúdo correspondente
                    const targetId = tab.id.replace('tab-', 'content-'); // ex: 'tab-gerador' -> 'content-gerador'
                    document.getElementById(targetId).classList.add('visible');
                });
            });
        });

        // --- SCRIPT 1 (Gerador YouTube) ---
        // Usamos um prefixo 'gerador_' para evitar conflitos
        document.addEventListener('DOMContentLoaded', () => {
            const gerador_apiKeyInput = document.getElementById('gerador-api-key');
            if (!gerador_apiKeyInput) return; // Só executa se estiver na página certa (embora aqui esteja em abas)

            const gerador_agentConfigs = {
                'ideas': {
                    btn: document.getElementById('generate-ideas-btn'),
                    loader: document.getElementById('ideas-loader'),
                    result: document.getElementById('ideas-result'),
                    inputs: [document.getElementById('topic-input')],
                    getPrompts: (inputs) => ({
                        system: "Você é um estrategista de conteúdo para o YouTube, especialista em identificar tendências e temas com alto potencial de viralização.",
                        user: `Baseado no tema central "${inputs[0]}", gere 5 ideias de vídeos para o YouTube. Para cada ideia, forneça um título provisório e uma breve descrição do conceito, focando em formatos que geram alto engajamento (listas, tutoriais, comparações, storytelling).`
                    })
                },
                'angles': {
                    btn: document.getElementById('generate-angles-btn'),
                    loader: document.getElementById('angles-loader'),
                    result: document.getElementById('angles-result'),
                    inputs: [document.getElementById('angle-input')],
                    getPrompts: (inputs) => ({
                        system: "Você é um roteirista e diretor de criação, mestre em transformar ideias boas em vídeos irresistíveis. Seu superpoder é encontrar ângulos únicos e provocativos.",
                        user: `Para a ideia de vídeo "${inputs[0]}", crie 3 ângulos de abordagem distintos e específicos. Para cada ângulo, explique o 'gancho' inicial (os primeiros 15 segundos) e por que ele atrairia a atenção do público.`
                    })
                },
                'titles': {
                    btn: document.getElementById('generate-titles-btn'),
                    loader: document.getElementById('titles-loader'),
                    result: document.getElementById('titles-result'),
                    inputs: [document.getElementById('title-input')],
                    getPrompts: (inputs) => ({
                        system: "Você é um especialista em SEO para YouTube e copywriting, focado em criar títulos que maximizam a taxa de cliques (CTR). Siga as melhores práticas: menos de 70 caracteres, uso de palavras-chave, números e gatilhos emocionais.",
                        user: `Gere 5 opções de títulos otimizados para um vídeo do YouTube com o seguinte tema: "${inputs[0]}". Os títulos devem ser magnéticos e claros sobre o conteúdo do vídeo.`
                    })
                },
                'thumbs': {
                    btn: document.getElementById('generate-thumbs-btn'),
                    loader: document.getElementById('thumbs-loader'),
                    result: document.getElementById('thumbs-result'),
                    inputs: [document.getElementById('thumb-input')],
                    getPrompts: (inputs) => ({
                        system: "Você é um designer gráfico e especialista em marketing visual para o YouTube. Sua tarefa é descrever conceitos de thumbnails com alta taxa de cliques. Você não cria a imagem, mas descreve todos os elementos para um designer executar.",
                        user: `Para um vídeo com o título "${inputs[0]}", descreva 3 conceitos de thumbnail. Para cada conceito, detalhe: 1. A imagem de fundo (plano principal). 2. Elementos gráficos (setas, círculos). 3. O texto na thumb (curto e impactante, máximo 3-4 palavras). 4. A paleta de cores para criar contraste e chamar atenção.`
                    })
                },
                'desc': {
                    btn: document.getElementById('generate-desc-btn'),
                    loader: document.getElementById('desc-loader'),
                    result: document.getElementById('desc-result'),
                    inputs: [document.getElementById('desc-title-input'), document.getElementById('desc-topic-input')],
                    getPrompts: (inputs) => ({
                        system: "Você é um especialista em SEO para YouTube. Sua função é escrever descrições de vídeo que ajudam o algoritmo do YouTube a entender e ranquear o conteúdo, além de informar o espectador.",
                        user: `Escreva uma descrição otimizada para um vídeo do YouTube com o título "${inputs[0]}" e sobre o tema "${inputs[1]}". A descrição deve incluir: 1. Um parágrafo inicial (2-3 linhas) que resume o vídeo e repete as palavras-chave principais do título. 2. Uma seção com "Neste vídeo, você vai aprender:". 3. Uma lista de 10-15 hashtags relevantes (misturando genéricas e específicas).`
                    })
                }
            };

            const gerador_checkInputs = () => {
                const apiKey = gerador_apiKeyInput.value.trim();
                for (const key in gerador_agentConfigs) {
                    const config = gerador_agentConfigs[key];
                    if (config.btn) { // Checa se o botão existe
                        const allInputsFilled = config.inputs.every(input => input.value.trim() !== '');
                        config.btn.disabled = !apiKey || !allInputsFilled;
                    }
                }
            };

            gerador_apiKeyInput.addEventListener('input', gerador_checkInputs);
            Object.values(gerador_agentConfigs).forEach(config => {
                config.inputs.forEach(input => input.addEventListener('input', gerador_checkInputs));
            });

            // Função de API renomeada para 'gerador_callGeminiAPI'
            async function gerador_callGeminiAPI(apiKey, systemPrompt, userQuery) {
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                        contents: [{ parts: [{ text: userQuery }] }],
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || 'Erro na requisição da API.');
                }
                
                const data = await response.json();
                const text = data.candidates[0]?.content?.parts[0]?.text;

                if (text) {
                    return text;
                } else {
                    throw new Error('A resposta da API está vazia ou em formato inesperado.');
                }
            }

            for (const key in gerador_agentConfigs) {
                const config = gerador_agentConfigs[key];
                if (config.btn) { // Checa se o botão existe
                    config.btn.addEventListener('click', async () => {
                        const apiKey = gerador_apiKeyInput.value.trim();
                        const inputValues = config.inputs.map(input => input.value.trim());

                        config.loader.classList.remove('hidden');
                        config.result.classList.add('hidden');
                        config.btn.disabled = true;

                        try {
                            const prompts = config.getPrompts(inputValues);
                            const resultText = await gerador_callGeminiAPI(apiKey, prompts.system, prompts.user);
                            config.result.textContent = resultText.trim();
                            config.result.classList.remove('hidden');
                        } catch (error) {
                            console.error(`Erro no agente ${key}:`, error);
                            config.result.textContent = `Ocorreu um erro: ${error.message}. Verifique sua API Key e o console.`;
                            config.result.classList.remove('hidden');
                        } finally {
                            config.loader.classList.add('hidden');
                            config.btn.disabled = false;
                            gerador_checkInputs();
                        }
                    });
                }
            }
             gerador_checkInputs(); // Chamada inicial
        });

        // --- SCRIPT 2 (Infográfico N8N) ---
        // Usamos um prefixo 'info_' para evitar conflitos
        document.addEventListener('DOMContentLoaded', function() {
            // GRÁFICOS
            const tooltipTitleCallback = function(tooltipItems) {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };
            
            // Só renderiza o gráfico se o canvas existir
            const costCanvas = document.getElementById('costChart');
            if (costCanvas) {
                const costCtx = costCanvas.getContext('2d');
                new Chart(costCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['API de Vídeo (Fal.ai)', 'Custo N8N Cloud', 'API de Título (Gemini)'],
                        datasets: [{
                            label: 'Custo por Vídeo',
                            data: [75, 20, 5],
                            backgroundColor: ['#087E8B', '#FF5A5F', '#BFD7EA'],
                            borderColor: '#FFFFFF',
                            borderWidth: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '60%',
                        plugins: { legend: { position: 'bottom' }, tooltip: { callbacks: { title: tooltipTitleCallback } } }
                    }
                });
            }

            const timeCanvas = document.getElementById('timeChart');
            if (timeCanvas) {
                const timeCtx = timeCanvas.getContext('2d');
                new Chart(timeCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Processo Manual', 'Workflow Automatizado'],
                        datasets: [{
                            label: 'Tempo em Minutos',
                            data: [45, 3],
                            backgroundColor: ['#FF5A5F', '#087E8B'],
                            borderRadius: 5,
                            barPercentage: 0.6,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: { x: { beginAtZero: true, title: { display: true, text: 'Minutos' } } },
                        plugins: { legend: { display: false }, tooltip: { callbacks: { title: tooltipTitleCallback } } }
                    }
                });
            }

            // LÓGICA DO GERADOR GEMINI (do Infográfico)
            const info_apiKeyInput = document.getElementById('info-api-key');
            const info_generateBtn = document.getElementById('info-generate-btn');
            const info_promptListContainer = document.getElementById('info-prompt-list');
            const info_resultContainer = document.getElementById('info-gemini-result');
            const info_loader = document.getElementById('info-loader');
            
            // Checa se os elementos existem antes de adicionar listeners
            if (!info_apiKeyInput) return;

            const info_prompts = [
                "Um astronauta surfando em um anel de Saturno, estilo synthwave.",
                "Um close-up cinematográfico de uma gota de chuva caindo em uma folha, em câmera lenta.",
                "Uma cidade futurista com carros voadores ao pôr do sol, arte pixelada.",
                "Um dragão majestoso voando sobre um castelo medieval em uma montanha nevada.",
                "Uma floresta mágica e brilhante à noite, com cogumelos luminosos e fadas.",
                "Um gato DJ usando fones de ouvido em uma festa rave cheia de luzes neon."
            ];

            let info_selectedPrompt = null;

            info_prompts.forEach(promptText => {
                const card = document.createElement('div');
                card.className = 'prompt-card bg-gray-50 p-4 rounded-lg shadow-sm hover:bg-gray-100';
                
                const text = document.createElement('p');
                text.className = 'text-gray-700 text-sm';
                text.textContent = promptText;
                card.appendChild(text);

                card.addEventListener('click', () => {
                    // Seleciona apenas dentro do container do infográfico
                    info_promptListContainer.querySelectorAll('.prompt-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    info_selectedPrompt = promptText;
                    info_updateButtonState();
                });

                info_promptListContainer.appendChild(card);
            });

            const info_updateButtonState = () => {
                if (info_apiKeyInput.value.trim() !== '' && info_selectedPrompt) {
                    info_generateBtn.disabled = false;
                } else {
                    info_generateBtn.disabled = true;
                }
            };
            
            info_apiKeyInput.addEventListener('input', info_updateButtonState);

            // Função de API renomeada para 'info_callGeminiAPI'
            async function info_callGeminiAPI(apiKey, systemPrompt, userQuery) {
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                        contents: [{ parts: [{ text: userQuery }] }],
                    })
                });
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || 'Erro na requisição da API.');
                }
                const data = await response.json();
                const text = data.candidates[0]?.content?.parts[0]?.text;
                if (text) {
                    return text;
                } else {
                    throw new Error('A resposta da API está vazia ou em formato inesperado.');
                }
            }

            info_generateBtn.addEventListener('click', async () => {
                const apiKey = info_apiKeyInput.value.trim();
                if (!apiKey || !info_selectedPrompt) {
                    info_resultContainer.textContent = 'Por favor, insira la API Key e selecione um prompt.';
                    return;
                }

                info_loader.classList.remove('hidden');
                info_resultContainer.textContent = '';
                info_generateBtn.disabled = true;

                const systemPrompt = "Você é um especialista em marketing para mídias sociais, focado em criar títulos virais para o TikTok.";
                const userQuery = `Crie 3 opções de títulos curtos e impactantes (máximo de 10 palavras cada) para um vídeo do TikTok gerado a partir do seguinte prompt: "${info_selectedPrompt}". Os títulos devem ser intrigantes e gerar curiosidade. Formate a resposta como uma lista numerada.`;

                try {
                    const resultText = await info_callGeminiAPI(apiKey, systemPrompt, userQuery);
                    info_resultContainer.innerHTML = resultText.replace(/\n/g, '<br>');
                } catch (error) {
                    console.error("Erro ao chamar a API Gemini:", error);
                    info_resultContainer.textContent = `Ocorreu um erro: ${error.message}. Verifique sua API Key e a console para mais detalhes.`;
                } finally {
                    info_loader.classList.add('hidden');
                    info_generateBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
